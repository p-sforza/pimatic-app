!function(e,t){var a=e.mobiscroll,l=a.util,s=l.isString,o={inputClass:"",invalid:[],rtl:!1,showInput:!0,group:!1,groupLabel:"Groups",checkIcon:"checkmark",dataText:"text",dataValue:"value",dataGroup:"group",dataDisabled:"disabled"};a.presetShort("select"),a.presets.scroller.select=function(a){function n(){var a,l,s,o,n,r=0,i={};g=[],L?e.each(B,function(e,u){o=u[A.dataText],n=u[A.dataValue],l=u[A.dataGroup],s={value:n,text:o},E[n]=s,g.push(s),R&&(i[l]===t?(a={label:l,options:[]},H[r]=a,i[l]=r,r++):a=H[i[l]],s.group=i[l],a.options.push(s)),u[A.dataDisabled]&&Q.push(n)}):R?e("optgroup",j).each(function(t){H[t]={label:this.label,options:[]},e("option",this).each(function(){s={value:this.value,text:this.text,group:t},E[this.value]=s,H[t].options.push(s),this.disabled&&Q.push(this.value)})}):e("option",j).each(function(){s={value:this.value,text:this.text},E[this.value]=s,g.push(s),this.disabled&&Q.push(this.value)})}function r(t,a,l){e.each(t,function(e,t){l.push(t.text),a.push(t.value)})}function i(){var t,a=0,l=[],s=[],o=[[]];return M&&(e.each(H,function(e,t){l.push(t.label),s.push(e)}),t={values:l,keys:s,label:A.groupLabel},k?o[0][a]=t:o[a]=[t],a++),l=[],s=[],O?e.each(H,function(e,t){l.push(t.label),s.push("__group"+e),Q.push("__group"+e),r(t.options,s,l)}):r(M?H[v].options:g,s,l),t={multiple:q,values:l,keys:s,label:I},k?o[0][a]=t:o[a]=[t],o}function u(a){q&&e.isArray(a)&&(a=a[0]),y=a===t||null===a||""===a?F:a,M&&(v=E[y].group)}function d(e,t){var l=e?a._tempWheelArray:a._hasValue?a._wheelArray:null;return l?A.group&&t?l:l[b]:null}function c(){var e,t,a=[],l=0;if(q){t=[];for(l in z)a.push(E[l]?E[l].text:""),t.push(l);e=a.join(", ")}else t=y,e=E[y]?E[y].text:"";m.val(e),j.val(t)}function h(e){var t=e.attr("data-val"),a=e.hasClass("dw-msel");if(q&&e.closest(".dwwl").hasClass("dwwms"))return e.hasClass("dw-v")&&(a?(e.removeClass(S).removeAttr("aria-selected"),delete z[t]):(e.addClass(S).attr("aria-selected","true"),z[t]=t)),!1}var p,v,f,w,m,g,b,y,x,C,V,_=e.extend({},a.settings),A=e.extend(a.settings,o,_),T=A.layout||(/top|bottom/.test(A.display)?"liquid":""),k="liquid"==T,j=e(this),q=A.multiple||j.prop("multiple"),D=this.id+"_dummy",G=e('label[for="'+this.id+'"]').attr("for",D),I=A.label!==t?A.label:G.length?G.text():j.attr("name"),S="dw-msel mbsc-ic mbsc-ic-"+A.checkIcon,W=A.readonly,B=A.data,L=!!B,R=L?B[0][A.dataGroup]:e("optgroup",j).length,F=L?B[0][A.dataValue]:e("option",j).attr("value"),M=R&&A.group,O=R&&!M,P=j.val()||[],Q=[],z={},E={},H={};if(A.invalid.length||(A.invalid=Q),M?(f=0,b=1):(f=-1,b=0),q)for(P&&s(P)&&(P=P.split(",")),w=0;w<P.length;w++)z[P[w]]=P[w];return n(),u(j.val()),e("#"+D).remove(),m=e('<input type="text" id="'+D+'" class="'+A.inputClass+'" placeholder="'+(A.placeholder||"")+'" readonly />'),A.showInput&&m.insertBefore(j),a.attachShow(m),j.addClass("dw-hsel").attr("tabindex",-1).closest(".ui-field-contain").trigger("create"),c(),a.setVal=function(e,t,o,n,r){q&&(e&&s(e)&&(e=e.split(",")),z=l.arrayToObject(e),e=e?e[0]:null),a._setVal(e,t,o,n,r)},a.getVal=function(e,t){return q?l.objectToArray(z):d(e,t)},a.getValues=a.getVal,a.getValue=d,{width:50,layout:T,headerText:!1,anchor:m,formatResult:function(e){var t,a=[];if(q){for(t in z)a.push(E[t]?E[t].text:"");return a.join(", ")}return y=e[b],E[y]?E[y].text:""},parseValue:function(e){return u(e===t?j.val():e),M?[v,y]:[y]},onValueTap:h,onValueFill:c,onBeforeShow:function(){q&&A.counter&&(A.headerText=function(){var t=0;return e.each(z,function(){t++}),t+" "+A.selectedText}),u(j.val()),M&&(C=v,a._tempWheelArray=[v,y]),n(),A.wheels=i()},onMarkupReady:function(t){t.addClass("dw-select"),e(".dwwl"+f,t).on("mousedown touchstart",function(){clearTimeout(V)}),O&&(e(".dw",t).addClass("dw-select-gr"),e('.dw-li[data-val^="__group"]',t).addClass("dw-w-gr")),q&&(t.addClass("dwms"),e(".dwwl",t).on("keydown",function(t){32==t.keyCode&&(t.preventDefault(),t.stopPropagation(),h(e(".dw-sel",this)))}).eq(b).addClass("dwwms").attr("aria-multiselectable","true"),x=e.extend({},z))},validate:function(l,s,o){var n,r,u=a.getArrayVal(!0),d=e(".dw-ul",l).eq(b);if(s===t&&q){r=z,n=0,e(".dwwl"+b+" .dw-li",l).removeClass(S).removeAttr("aria-selected");for(n in r)e(".dwwl"+b+' .dw-li[data-val="'+r[n]+'"]',l).addClass(S).attr("aria-selected","true")}if(!M||s!==t&&s!==f)y=u[b];else if((v=+u[f])!==C){if(y=H[v].options[0].value,A.wheels=i(),!p)return a._tempWheelArray=[v,y],A.readonly=[!1,!0],clearTimeout(V),V=setTimeout(function(){p=!0,C=v,a.changeWheel([b],t,!0),A.readonly=W},1e3*o),!1}else A.readonly=W;e.each(A.invalid,function(t,a){e('.dw-li[data-val="'+a+'"]',d).removeClass("dw-v")}),p=!1},onClear:function(t){z={},m.val(""),e(".dwwl"+b+" .dw-li",t).removeClass(S).removeAttr("aria-selected")},onCancel:function(){!a.live&&q&&(z=e.extend({},x))},onDestroy:function(){m.remove(),j.removeClass("dw-hsel").removeAttr("tabindex")}}}}(jQuery);