(function(){var e=[].slice;!function(){var e,t;if(jQuery.mobile.loader.prototype.fakeFixLoader=function(){},t={},e=function(){var e,n,a,i;a={text:"",textVisible:!0,textonly:!1},e=!1;for(n in t)null!=(i=t[n]).text&&(0!==a.text.length&&(a.text+=", "),a.text+=i.text),!0===i.blocking&&(e=!0);return 0!==a.text.length?a.text+="...":a.textVisible=!1,e?$("body").addClass("ui-loading-blocking"):($("body").removeClass("ui-loading-blocking"),a.textVisible=!0,a.textonly=!0,0===a.text.length&&(a.text=__("Loading")+"...")),a},pimatic.loading=function(n,a,i){setTimeout(function(){var o;switch(a){case"show":return t[n]=i,$.mobile.loading("show",e());case"hide":return delete t[n],0===function(){var e;e=[];for(o in t)e.push(o);return e}().length?($.mobile.loading("hide"),$("body").removeClass("ui-loading-blocking")):$.mobile.loading("show",e())}},1)},pimatic.loading.pendingLoadings=t,$(document).on("pagechange",function(n){setTimeout(function(){var n,a;if(0!==function(){var e;e=[];for(n in t)e.push(n);return e}().length)return a=e(),$.mobile.loading("show",a)},1)}),$(document).on("vclick",".ui-loader",function(){return window.location.reload()}),"none"!==overthrow.support)$.mobile.Transition.prototype.scrollPage=function(){}}(),$.ajaxSetup({timeout:2e4}),$(document).ajaxStart(function(){return pimatic.loading("ajax","show",{text:"loading",blocking:!0})}),$(document).ajaxStop(function(){return pimatic.loading("ajax","hide")}),$(document).ajaxError(function(){}),$(document).ready(function(){if(window.applicationCache)return window.applicationCache.addEventListener("updateready",function(e){return window.applicationCache.status!==window.applicationCache.UPDATEREADY||pimatic.themeChanged||(window.applicationCache.swapCache(),swal({title:"Reload?",text:"A new version of the frontend is available. Load it?",type:"info",showCancelButton:!0,cancelButtonText:"Not right now...",confirmButtonText:"Reload!",closeOnConfirm:!1},function(){return swal("Reloading!","Reloading app, please wait.","success"),window.location.reload()})),pimatic.themeChanged=!1},!1)},!1),pimatic.try=function(e){try{return e.apply(this,arguments)}catch(e){e}},pimatic.tryCatch=function(e){return function(){var t;try{return e.apply(this,arguments)}catch(e){return t=e,TraceKit.report(t)}}},window.ajaxShowToast=function(e,t,n){return pimatic.showToast(null!=e.message?__(e.message):__("done"))},window.ajaxAlertFail=function(e,t,n){var a,i;a=null;try{a=$.parseJSON(e.responseText)}catch(e){e}return i=null!=(null!=a?a.message:void 0)?a.message:i=null!=n&&""!==n?n:"error"===t?__("No connection"):t,swal("Oops...",__(i),"error"),!0},pimatic.timestampToDateTime=function(e){var t,n,a;return a=function(e){return e<10?"0"+e:""+e},t=new Date(e),n=t.getFullYear()+"-"+a(t.getMonth()+1)+"-"+a(t.getDate()),e=a(t.getHours())+":"+a(t.getMinutes())+":"+a(t.getSeconds()),{date:n,time:e}},pimatic.toHHMMSS=function(e){var t,n,a;return a=parseInt(e,10),t=Math.floor(a/3600),n=Math.floor((a-3600*t)/60),e=a-3600*t-60*n,t<10&&(t="0"+t),n<10&&(n="0"+n),e<10&&(e="0"+e),t+":"+n+":"+e},$(document).ready(function(){var e;e=ko.observableArray([]),ko.applyBindings({toastMessages:e},$("#toasts")[0]),pimatic.showToast=function(t){var n;n={message:t},e.push(n),setTimeout(function(){return e.remove(n)},4500)}}),pimatic.isValidId=function(e){return null!=e.match(/^[a-z0-9_-]+$/)},pimatic.isValidVariableName=function(e){return null!=e.match(/^[a-zA-Z0-9_-]+$/)},pimatic.invalidIdMessage='The entered ID is not valid. Please use only lowercase alphanumeric characters, "_" and "-".',pimatic.invalidVariableNameMessage='The entered variable name is not valid. Please use only alphanumeric characters, "_" and "-".',pimatic.makeIdFromName=function(e){var t,n,a,i;for(e=(e=e.replace(/^\s+|\s+$/g,"")).toLowerCase(),i="aaaaeeeeiiiioooouuuunc------",n=0,a=(t="àáäâèéëêìíïîòóöôùúüûñç·/_,:;").length;n<a;)e=e.replace(new RegExp(t.charAt(n),"g"),i.charAt(n)),n++;return e=e.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")},pimatic.autoFillId=function(e,t,n){var a;a="",e.subscribe(function(e){var i,o;{if("add"===n())return i=t(),o=pimatic.makeIdFromName(e),i!==a&&0!==i.length||t(o),a=o;a=""}})},window.__=function(){var t,n,a,i,o,r;for(o=arguments[0],n=2<=arguments.length?e.call(arguments,1):[],r=o,null!=locale[o]&&(r=locale[o]),a=0,i=n.length;a<i;a++)t=n[a],r=r.replace(/%s/,t);return r},null==window.console&&(window.console={log:function(){}}),TraceKit.report.subscribe(function(e){var t,n,a,i,o,r,c,l,s;for(i=0,o=(l=e.stack).length;i<o;i++)if(null!=(n=l[i]).context)for(a=c=0,r=(s=n.context).length;c<r;a=++c)(t=s[a]).length>200&&(n.context[a]=t.substring(0,200)+"...");return $.ajax({url:"/client-error",type:"POST",global:!1,data:{error:e}})}),pimatic.changeTheme=function(e){return $("#theme-link").attr("href","/theme/"+e+".css?save=1"),$("#select-theme").val(e),pimatic.themeChanged=!0,pimatic.storage.set("pimatic.theme",e)},function(){var e,t,n,a,i;(a=$("#theme-link")).remove(),null!=(n=pimatic.storage.get("pimatic.theme"))?a.attr("href","/theme/"+n+".css?save=1"):(e=a.attr("data-default-theme"),a.attr("href","/theme/"+e+".css?save=1")),pimatic.themeChanged=!0,t=a.prop("outerHTML"),document.write(t),$(document).on("change","#select-theme",function(){return pimatic.changeTheme($(this).val())}),(i=function(){var e,t;if(e=$("#index .ui-header").css("background-color"),t=$("#theme-color"),null!=e&&e!==t.attr("content"))return t.attr("content",e)})(),setInterval(i,500)}(),pimatic.fixedAddElement=function(e,t,n,a){var i,o;return i=function(){if(e())return n.css({width:a.width()})},$(window).resize(i),o=t(),t.subscribe(function(e){return(o=e)?(a.css({height:a.height()+n.outerHeight()}),a.parent().css({"padding-bottom":0})):a.parent().css({"padding-bottom":n.outerHeight()})}),ko.computed(function(){return e()&&!o?(n.css({position:"fixed",left:0,bottom:0,height:n.height(),width:a.width(),"z-index":3}),a.parent().css({"padding-bottom":n.outerHeight()}),n.addClass("fixed-add-element")):(n.css({position:"relative",height:"auto",width:"auto"}),a.parent().css({"padding-bottom":0}),n.removeClass("fixed-add-element"))}).extend({rateLimit:{timeout:200,method:"notifyWhenChangesStop"}})},$.mobile.changePage=function(e,t){var n;return"index"!==(n="string"==typeof e?e.split("#")[1]:e.attr("id"))&&null!=scripts[n]?LazyLoad.js(scripts[n],function(){return $.mobile.pageContainer.pagecontainer("change",e,t)}):$.mobile.pageContainer.pagecontainer("change",e,t)}}).call(this);