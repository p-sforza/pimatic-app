(function(){var e,i,t=function(e,i){return function(){return e.apply(i,arguments)}};i=pimatic.tryCatch,e=function(){function e(){this.deviceEntryIcon=t(this.deviceEntryIcon,this),this.isDeviceAdded=t(this.isDeviceAdded,this),this.devices=pimatic.devices,this.refreshDeviceListView=ko.computed(function(e){return function(){return e.devices(),pimatic.try(function(){return $("#device-items").listview("refresh")})}}(this)).extend({rateLimit:{timeout:10,method:"notifyWhenChangesStop"}})}return e.prototype.isDeviceAdded=function(e){var i,t,n;return null!=(i=null!=(t=pimatic.pages.index)&&null!=(n=t.activeDevicepage())?n.devices:void 0)&&null!=ko.utils.arrayFirst(i(),function(i){return i.deviceId===e.id})},e.prototype.deviceEntryIcon=function(e){return this.isDeviceAdded(e)?"check":"plus"},e.prototype.addDeviceToIndexPage=function(e){var i,t;if(!this.isDeviceAdded(e)&&null!=(i=null!=(t=pimatic.pages.index)?t.activeDevicepage():void 0))return pimatic.client.rest.addDeviceToPage({pageId:i.id,deviceId:e.id}).done(ajaxShowToast).fail(ajaxAlertFail)},e}(),i(function(){return pimatic.pages.addItem=new e})(),$(document).on("pagecreate","#add-item-page",i(function(e){return ko.applyBindings(pimatic.pages.addItem,$("#add-item-page")[0]),$("#device-items").on("click","li.item",i(function(){var e;e=$(this),pimatic.pages.addItem.addDeviceToIndexPage(ko.dataFor(e[0]))}))})),$(document).on("pageshow","#add-item-page",i(function(e){}))}).call(this);