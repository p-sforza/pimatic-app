!function(e,t){var a=e.mobiscroll,r=a.datetime,n=new Date,i={startYear:n.getFullYear()-100,endYear:n.getFullYear()+1,separator:" ",dateFormat:"mm/dd/yy",dateOrder:"mmddy",timeWheels:"hhiiA",timeFormat:"hh:ii A",dayText:"Day",yearText:"Year",hourText:"Hours",minuteText:"Minutes",ampmText:"&nbsp;",secText:"Seconds",nowText:"Now"},s=function(n){function s(e,a,r){return j[a]!==t?+e[j[a]]:r!==t?r:z[a](X)}function u(e,t,a,r){e.push({values:a,keys:t,label:r})}function o(e,t,a,r){return Math.min(r,Math.floor(e/t)*t+a)}function l(e){if(null===e)return e;var t=s(e,"h",0);return R.getDate(s(e,"y"),s(e,"m"),s(e,"d",1),s(e,"a",0)?t+12:t,s(e,"i",0),s(e,"s",0))}function f(e,t,a){return Math.floor((a-t)/e)*e+t}function d(e,t){var a,r,n=!1,i=!1,s=0,u=0;if(m(e))return e;if(e<ne&&(e=ne),e>ie&&(e=ie),a=e,r=e,2!==t)for(n=m(a);!n&&a<ie;)n=m(a=new Date(a.getTime()+864e5)),s++;if(1!==t)for(i=m(r);!i&&r>ne;)i=m(r=new Date(r.getTime()-864e5)),u++;return 1===t&&n?a:2===t&&i?r:u<s&&i?r:a}function m(e){return!(e<ne)&&(!(e>ie)&&(!!c(e,Q)||!c(e,B)))}function c(e,t){var a,r,n;if(t)for(r=0;r<t.length;r++)if(a=t[r],n=a+"",!a.start)if(a.getTime){if(e.getFullYear()==a.getFullYear()&&e.getMonth()==a.getMonth()&&e.getDate()==a.getDate())return!0}else if(n.match(/w/i)){if((n=+n.replace("w",""))==e.getDay())return!0}else if((n=n.split("/"))[1]){if(n[0]-1==e.getMonth()&&n[1]==e.getDate())return!0}else if(n[0]==e.getDate())return!0;return!1}function h(e,t,a,r,n,i,s){var u,o,l;if(e)for(u=0;u<e.length;u++)if(o=e[u],l=o+"",!o.start)if(o.getTime)R.getYear(o)==t&&R.getMonth(o)==a&&(i[R.getDay(o)-1]=s);else if(l.match(/w/i))for(l=+l.replace("w",""),S=l-r;S<n;S+=7)S>=0&&(i[S]=s);else(l=l.split("/"))[1]?l[0]-1==a&&(i[l[1]-1]=s):i[l[0]-1]=s}function p(a,r,n,i,s,u,l,f,d){var m,c,h,p,g,w,D,v,x,T,M,Y,F,S,H,C,V,b,A={},k={h:ee,i:te,s:ae,a:1},q=R.getDate(s,u,l),W=["a","h","i","s"];a&&(e.each(a,function(e,t){t.start&&(t.apply=!1,m=t.d,h=(c=m+"").split("/"),m&&(m.getTime&&s==R.getYear(m)&&u==R.getMonth(m)&&l==R.getDay(m)||!c.match(/w/i)&&(h[1]&&l==h[1]&&u==h[0]-1||!h[1]&&l==h[0])||c.match(/w/i)&&q.getDay()==+c.replace("w",""))&&(t.apply=!0,A[q]=!0))}),e.each(a,function(a,i){if(F=0,S=0,M=0,Y=t,w=!0,D=!0,H=!1,i.start&&(i.apply||!i.d&&!A[q])){for(p=i.start.split(":"),g=i.end.split(":"),T=0;T<3;T++)p[T]===t&&(p[T]=0),g[T]===t&&(g[T]=59),p[T]=+p[T],g[T]=+g[T];for(p.unshift(p[0]>11?1:0),g.unshift(g[0]>11?1:0),L&&(p[1]>=12&&(p[1]=p[1]-12),g[1]>=12&&(g[1]=g[1]-12)),T=0;T<r;T++)E[T]!==t&&(v=o(p[T],k[W[T]],N[W[T]],O[W[T]]),x=o(g[T],k[W[T]],N[W[T]],O[W[T]]),C=0,V=0,b=0,L&&1==T&&(C=p[0]?12:0,V=g[0]?12:0,b=E[0]?12:0),w||(v=0),D||(x=O[W[T]]),(w||D)&&v+C<E[T]+b&&E[T]+b<x+V&&(H=!0),E[T]!=v&&(w=!1),E[T]!=x&&(D=!1));if(!d)for(T=r+1;T<4;T++)p[T]>0&&(F=k[n]),g[T]<O[W[T]]&&(S=k[n]);H||(v=o(p[r],k[n],N[n],O[n])+F,x=o(g[r],k[n],N[n],O[n])-S,w&&(M=y(f,v,O[n],0)),D&&(Y=y(f,x,O[n],1))),(w||D||H)&&(d?e(".dw-li",f).slice(M,Y).addClass("dw-v"):e(".dw-li",f).slice(M,Y).removeClass("dw-v"))}}))}function g(t,a){return e(".dw-li",t).index(e('.dw-li[data-val="'+a+'"]',t))}function y(t,a,r,n){return a<0?0:a>r?e(".dw-li",t).length:g(t,a)+n}function w(e){var a,r=[];if(null===e||e===t)return e;for(a in j)r[j[a]]=z[a](e);return r}function D(e){var t,a,r,n=[];if(e){for(t=0;t<e.length;t++)if((a=e[t]).start&&a.start.getTime)for(r=new Date(a.start);r<=a.end;)n.push(new Date(r.getFullYear(),r.getMonth(),r.getDate())),r.setDate(r.getDate()+1);else n.push(a);return n}return e}var v,x=e(this),T={};if(x.is("input")){switch(x.attr("type")){case"date":v="yy-mm-dd";break;case"datetime":v="yy-mm-ddTHH:ii:ssZ";break;case"datetime-local":v="yy-mm-ddTHH:ii:ss";break;case"month":v="yy-mm",T.dateOrder="mmyy";break;case"time":v="HH:ii:ss"}var M=x.attr("min"),Y=x.attr("max");M&&(T.minDate=r.parseDate(v,M)),Y&&(T.maxDate=r.parseDate(v,Y))}var F,S,H,C,V,b,A,k,N,O,q=e.extend({},n.settings),R=e.extend(n.settings,a.datetime.defaults,i,T,q),W=0,E=[],U=[],_=[],j={},z={y:function(e){return R.getYear(e)},m:function(e){return R.getMonth(e)},d:function(e){return R.getDay(e)},h:function(e){var t=e.getHours();return t=L&&t>=12?t-12:t,o(t,ee,se,le)},i:function(e){return o(e.getMinutes(),te,ue,fe)},s:function(e){return o(e.getSeconds(),ae,oe,de)},a:function(e){return K&&e.getHours()>11?1:0}},B=R.invalid,Q=R.valid,Z=R.preset,G=R.dateOrder,I=R.timeWheels,J=G.match(/D/),K=I.match(/a/i),L=I.match(/h/),P="datetime"==Z?R.dateFormat+R.separator+R.timeFormat:"time"==Z?R.timeFormat:R.dateFormat,X=new Date,$=R.steps||{},ee=$.hour||R.stepHour||1,te=$.minute||R.stepMinute||1,ae=$.second||R.stepSecond||1,re=$.zeroBased,ne=R.minDate||new Date(R.startYear,0,1),ie=R.maxDate||new Date(R.endYear,11,31,23,59,59),se=re?0:ne.getHours()%ee,ue=re?0:ne.getMinutes()%te,oe=re?0:ne.getSeconds()%ae,le=f(ee,se,L?11:23),fe=f(te,ue,59),de=f(te,ue,59);if(v=v||P,Z.match(/date/i)){for(e.each(["y","m","d"],function(e,t){(F=G.search(new RegExp(t,"i")))>-1&&_.push({o:F,v:t})}),_.sort(function(e,t){return e.o>t.o?1:-1}),e.each(_,function(e,t){j[t.v]=e}),V=[],S=0;S<3;S++)if(S==j.y){for(W++,C=[],H=[],b=R.getYear(ne),A=R.getYear(ie),F=b;F<=A;F++)H.push(F),C.push((G.match(/yy/i)?F:(F+"").substr(2,2))+(R.yearSuffix||""));u(V,H,C,R.yearText)}else if(S==j.m){for(W++,C=[],H=[],F=0;F<12;F++){var me=G.replace(/[dy]/gi,"").replace(/mm/,(F<9?"0"+(F+1):F+1)+(R.monthSuffix||"")).replace(/m/,F+1+(R.monthSuffix||""));H.push(F),C.push(me.match(/MM/)?me.replace(/MM/,'<span class="dw-mon">'+R.monthNames[F]+"</span>"):me.replace(/M/,'<span class="dw-mon">'+R.monthNamesShort[F]+"</span>"))}u(V,H,C,R.monthText)}else if(S==j.d){for(W++,C=[],H=[],F=1;F<32;F++)H.push(F),C.push((G.match(/dd/i)&&F<10?"0"+F:F)+(R.daySuffix||""));u(V,H,C,R.dayText)}U.push(V)}if(Z.match(/time/i)){for(k=!0,_=[],e.each(["h","i","s","a"],function(e,t){(e=I.search(new RegExp(t,"i")))>-1&&_.push({o:e,v:t})}),_.sort(function(e,t){return e.o>t.o?1:-1}),e.each(_,function(e,t){j[t.v]=W+e}),V=[],S=W;S<W+4;S++)if(S==j.h){for(W++,C=[],H=[],F=se;F<(L?12:24);F+=ee)H.push(F),C.push(L&&0===F?12:I.match(/hh/i)&&F<10?"0"+F:F);u(V,H,C,R.hourText)}else if(S==j.i){for(W++,C=[],H=[],F=ue;F<60;F+=te)H.push(F),C.push(I.match(/ii/)&&F<10?"0"+F:F);u(V,H,C,R.minuteText)}else if(S==j.s){for(W++,C=[],H=[],F=oe;F<60;F+=ae)H.push(F),C.push(I.match(/ss/)&&F<10?"0"+F:F);u(V,H,C,R.secText)}else S==j.a&&(W++,u(V,[0,1],I.match(/A/)?[R.amText.toUpperCase(),R.pmText.toUpperCase()]:[R.amText,R.pmText],R.ampmText));U.push(V)}return n.getVal=function(e){return n._hasValue||e?l(n.getArrayVal(e)):null},n.setDate=function(e,t,a,r,i){n.setArrayVal(w(e),t,i,r,a)},n.getDate=n.getVal,n.format=P,n.order=j,n.handlers.now=function(){n.setDate(new Date,!1,.3,!0,!0)},n.buttons.now={text:R.nowText,handler:"now"},B=D(B),Q=D(Q),ne=l(w(ne)),ie=l(w(ie)),N={y:ne.getFullYear(),m:0,d:1,h:se,i:ue,s:oe,a:0},O={y:ie.getFullYear(),m:11,d:31,h:le,i:fe,s:de,a:1},{wheels:U,headerText:!!R.headerText&&function(){return r.formatDate(P,l(n.getArrayVal(!0)),R)},formatResult:function(e){return r.formatDate(v,l(e),R)},parseValue:function(e){return w(e?r.parseDate(v,e,R):R.defaultValue||new Date)},validate:function(a,r,i,u){var o=w(d(l(n.getArrayVal(!0)),u)),f=s(o,"y"),m=s(o,"m"),c=!0,y=!0;e.each(["y","m","d","a","h","i","s"],function(r,n){if(j[n]!==t){var i=N[n],u=O[n],l=31,d=s(o,n),p=e(".dw-ul",a).eq(j[n]);if("d"==n&&(u=l=R.getMaxDayOfMonth(f,m),J&&e(".dw-li",p).each(function(){var t=e(this),a=t.data("val"),r=R.getDate(f,m,a).getDay(),n=G.replace(/[my]/gi,"").replace(/dd/,(a<10?"0"+a:a)+(R.daySuffix||"")).replace(/d/,a+(R.daySuffix||""));e(".dw-i",t).html(n.match(/DD/)?n.replace(/DD/,'<span class="dw-day">'+R.dayNames[r]+"</span>"):n.replace(/D/,'<span class="dw-day">'+R.dayNamesShort[r]+"</span>"))})),c&&ne&&(i=z[n](ne)),y&&ie&&(u=z[n](ie)),"y"!=n){var w=g(p,i),D=g(p,u);e(".dw-li",p).removeClass("dw-v").slice(w,D+1).addClass("dw-v"),"d"==n&&e(".dw-li",p).removeClass("dw-h").slice(l).addClass("dw-h")}if(d<i&&(d=i),d>u&&(d=u),c&&(c=d==i),y&&(y=d==u),"d"==n){var v=R.getDate(f,m,1).getDay(),x={};h(B,f,m,v,l,x,1),h(Q,f,m,v,l,x,0),e.each(x,function(t,a){a&&e(".dw-li",p).eq(t).removeClass("dw-v")})}}}),k&&e.each(["a","h","i","s"],function(r,i){var l=s(o,i),d=s(o,"d"),c=e(".dw-ul",a).eq(j[i]);j[i]!==t&&(p(B,r,i,0,f,m,d,c,0),p(Q,r,i,0,f,m,d,c,1),E[r]=+n.getValidCell(l,c,u).val)}),n._tempWheelArray=o}}};e.each(["date","time","datetime"],function(e,t){a.presets.scroller[t]=s})}(jQuery);