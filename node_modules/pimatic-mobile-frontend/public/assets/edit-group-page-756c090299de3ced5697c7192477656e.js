(function(){$(document).on("pagebeforecreate",function(e){var t,r;if(null==pimatic.pages.editGroup){t=function(){function e(){this.pageTitle=ko.computed(function(e){return function(){return"add"===e.action()?__("Add New Group"):__("Edit Group")}}(this)),pimatic.autoFillId(this.groupName,this.groupId,this.action)}return e.prototype.action=ko.observable("add"),e.prototype.groupName=ko.observable(""),e.prototype.groupId=ko.observable(""),e.prototype.resetFields=function(){return this.groupName(""),this.groupId("")},e.prototype.onSubmit=function(){var e;{if(pimatic.isValidId(this.groupId()))return e={groupId:this.groupId(),group:{name:this.groupName()}},function(){switch(this.action()){case"add":return pimatic.client.rest.addGroup(e);case"update":return pimatic.client.rest.updateGroup(e);default:throw new Error("Illegal devicegroup action: "+action())}}.call(this).done(function(e){return e.success?$.mobile.changePage("#groups-page",{transition:"slide",reverse:!0}):alert(e.error)}).fail(ajaxAlertFail),!1;alert(__(pimatic.invalidIdMessage))}},e.prototype.onRemove=function(){return confirm(__("Do you really want to delete the %s group?",this.groupName()))&&pimatic.client.rest.removeGroup({groupId:this.groupId()}).done(function(e){return e.success?$.mobile.changePage("#groups-page",{transition:"slide",reverse:!0}):alert(e.error)}).fail(ajaxAlertFail),!1},e}();try{pimatic.pages.editGroup=new t}catch(e){r=e,TraceKit.report(r)}}}),$(document).on("pagecreate","#edit-group-page",function(e){var t;try{return ko.applyBindings(pimatic.pages.editGroup,$("#edit-group-page")[0])}catch(e){return t=e,TraceKit.report(t)}}),$(document).on("pagebeforeshow","#edit-group-page",function(e){var t,r,o;t=pimatic.pages.editGroup,o=jQuery.mobile.pageParams,jQuery.mobile.pageParams={},"update"===(null!=o?o.action:void 0)?(r=o.group,t.action("update"),t.groupId(r.id),t.groupName(r.name())):(t.resetFields(),t.action("add"))})}).call(this);