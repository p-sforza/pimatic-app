(function(){var i;i=pimatic.tryCatch,$(document).ready(i(function(i){var e;return e=function(){function i(){}return i.prototype.showLoginDialog=function(){var i;return this.redirectPage=(null!=(i=$.mobile.activePage)?i.attr("id"):void 0)||"index","login-page"===this.redirectPage&&(this.redirectPage="index"),pimatic.socket.io.disconnect(),jQuery.mobile.changePage("#login-page",{transition:"flip"})},i.prototype.hideLoginDialog=function(){var i;if("login-page"===((null!=(i=$.mobile.activePage)?i.attr("id"):void 0)||"index"))return jQuery.mobile.changePage("#"+(this.redirectPage||"index"),{transition:"flip"})},i}(),pimatic.pages.login=new e})),$(document).on("pagebeforeshow","#login-page",function(i){var e,n,o;return null==(null!=(e=pimatic.socket.io)?e.connected:void 0)||0===(null!=(n=pimatic.socket.io)&&null!=(o=n.connected)?o.length:void 0)||(pimatic.pages.login.hideLoginDialog(),!1)}),$(document).on("pageshow","#login-page",function(i){return $("#loginForm  #firstName").focus()}),$(document).on("submit","#login-page #loginForm",i(function(i){return $("#loginForm #rememberMe").val(),pimatic.loading("socket","show",{text:__("Logging in"),blocking:!0}),$.ajax({type:"POST",url:"/login",data:$("#loginForm").serialize(),global:!1}).done(function(i){return pimatic.loading("socket","show",{text:__("Connecting"),blocking:!0}),setTimeout(function(){return pimatic.rememberme(i.rememberMe),pimatic.socket.io.reconnection(!0),pimatic.socket.io.connect()},1)}).fail(function(){return pimatic.loading("socket","hide")}).fail(ajaxAlertFail),i.preventDefault(),!1}))}).call(this);