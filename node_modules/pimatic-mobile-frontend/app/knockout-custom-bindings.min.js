(function(){var t=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};!function(){var e,n;n=function(t,e){var n,i;return(i=function(){var e,i,o,l;for(l=[],e=0,i=(o=t.attr("class").split(" ")).length;e<i;e++)0!==(n=o[e]).lastIndexOf("ui-icon-")&&l.push(n);return l}()).push("ui-icon-"+e),t.attr("class",i.join(" "))},ko.bindingHandlers.jqmbutton={init:function(t,e,n){var i;i=e(),ko.unwrap(i),$(t)},update:function(t,e,i){var o,l,a,r,s;if(r=e(),s=ko.unwrap(r),o=$(t),null!=s.text&&(a=ko.unwrap(s.text),o.text(a)),null!=s.icon&&(l=ko.unwrap(s.icon),n(o,l)),null!=s.enabled)if(ko.unwrap(s.enabled))try{o.button("enable")}catch(t){t,o.removeClass("ui-state-disabled")}else try{o.button("disable")}catch(t){t,o.addClass("ui-state-disabled")}}},ko.bindingHandlers.jqmlistitem={update:function(t,e,i){var o,l,a;if(a=e(),ko.unwrap(a),o=$(t),null!=a.icon)return l=ko.unwrap(a.icon),n(o,l)}},ko.bindingHandlers.jqmenabled={update:function(t,e,n){var i,o,l;switch(o=e(),l=ko.unwrap(o),i=$(t),t.type){case"select-one":null!=i.data("mobileFlipswitch")?l?i.flipswitch("enable"):i.flipswitch("disable"):l?i.selectmenu("enable"):i.selectmenu("disable");break;default:l?i.textinput("enable"):i.textinput("disable")}}},ko.bindingHandlers.jqmchecked={init:function(t,e,n){ko.bindingHandlers.checked.init(t,e,n),$(t).checkboxradio()},update:function(t,e){var n;n=e(),ko.unwrap(n),$(t).checkboxradio("refresh")}},ko.bindingHandlers.jqmselectedOptions={init:function(t,e){var n,i;return i=e(),(n=$(t)).on("change",function(){var t;return null==(t=n.val())&&(t=[]),i(t)})},update:function(t,e){var n,i;i=e(),(n=$(t)).val(i()),n.selectmenu("refresh",!0)}},ko.bindingHandlers.jqmflipswitch={init:function(t,e){var n,i;if(i=e(),(n=$(t)).flipswitch(),ko.isObservable(i))return n.on("change",function(){var t;switch(t=n.val()){case"true":t=!0;break;case"false":t=!1}if(ko.unwrap(i)!==t)return i(t)})},update:function(t,e){var n,i,o;i=e(),o=ko.unwrap(i),n=$(t),"boolean"==typeof o&&(o=""+o),n.val(o),n.flipswitch("refresh")}},ko.bindingHandlers.jqmoptions={init:function(t,e,n){ko.bindingHandlers.options.init(t,e,n),$(t).selectmenu()},update:function(t,e,n){var i,o;ko.bindingHandlers.options.update(t,e,n),null!=(o=null!=(i=n())?i.value():void 0)&&$(t).val(o),$(t).selectmenu("refresh")}},ko.bindingHandlers.jqmlistview={init:function(t,e,n){setTimeout(function(){return $(t).listview()},1)},update:function(t,e,n){e(),setTimeout(function(){try{return $(t).listview("refresh")}catch(t){t}},1)}},ko.bindingHandlers.jqmtextinput={init:function(t,e,n){$(t).textinput({enhanced:!0}),ko.bindingHandlers.textInput.init(t,e,n)}},ko.bindingHandlers.sparkline={init:function(t,e){return ko.bindingHandlers.sparkline.update(t,e),setTimeout(function(){return $.sparkline_display_visible()},100)},update:function(t,e){var n,i,o,l;return o=e(),l=ko.unwrap(o),n=ko.unwrap(l.data),i=l.tooltipFormatter,$(t).sparkline(n,{disableTooltips:!0,height:19,type:"line",lineColor:"#7c7c7c",fillColor:"#cccccc",spotColor:"#666666",minSpotColor:null,maxSpotColor:null,highlightSpotColor:null,highlightLineColor:null,drawNormalOnTop:!1,tooltipFormatter:i})}},ko.bindingHandlers.toast={init:function(t,e){var n,i,o,l;return o=e(),l=ko.unwrap(o),(n=$(t)).text(l),n.toast(),n.toast("show"),i=n.outerHeight()+2,n.parent().find(".ui-toast").each(function(){var e,n;this!==t&&((e=$(this)).addClass("animated-toast"),n=e.data("top")+i,e.css("top",n+"px"),e.data("top",n))})}},ko.bindingHandlers.tooltip={init_tooltip:function(t,e,n){var i,o,l,a;return i=Math.min(n.parent().height(),$(window).height()),(o=Math.min(n.parent().width(),$(window).width()))<1.5*e.outerWidth()?e.css("max-width",o/2):e.css("max-width",340),l=t.offset().left+t.outerWidth()/2-e.outerWidth()/2,a=t.offset().top-e.outerHeight()-20,l<0?(l=t.offset().left+t.outerWidth()/2-20,e.addClass("left")):e.removeClass("left"),l+e.outerWidth()>o?(l=t.offset().left-e.outerWidth()+t.outerWidth()/2+20,e.addClass("right")):e.removeClass("right"),a+e.outerHeight()+30>i?(a-=10,e.removeClass("top")):(a=t.offset().top+t.outerHeight()-10,e.addClass("top")),e.removeClass("animated-tooltip").css({left:l,top:a,opacity:0}),e[0].offsetWidth=e[0].offsetWidth,e.addClass("animated-tooltip").css({top:a+20}).animate({opacity:1},100),e},remove_tooltip:function(t,e){return ko.bindingHandlers.tooltip.doRemove=!0,e.animate({opacity:0},200,function(){if(ko.bindingHandlers.tooltip.doRemove)return e.removeClass("animated-tooltip").remove()})},init:function(e,n){var i,o;return i=$(e),o=n(),i.bind("vclick",function(){var e,l,a,r,s,u;if(!(s=ko.unwrap(o))||""===s)return!1;0===(u=$("#tooltip")).length&&(u=$('<div id="tooltip" class="ui-corner-all"></div>')).css("opacity",0).html(s).appendTo("body"),ko.bindingHandlers.tooltip.doRemove=!1,null!=(a=ko.bindingHandlers.tooltip.subscribtion)&&a.dispose(),clearInterval(ko.bindingHandlers.tooltip.interval),clearTimeout(ko.bindingHandlers.tooltip.timeout),$(window).off("touchstart",ko.bindingHandlers.tooltip.touchdispose),0===(e=i.parents(".owl-item")).length&&(e=i.parents(".ui-content.overthrow")),ko.bindingHandlers.tooltip.init_tooltip(i,u,e),ko.bindingHandlers.tooltip.subscribtion=ko.computed(function(){return s=n()(),u.html(s),ko.bindingHandlers.tooltip.init_tooltip(i,u,e)}),r=function(t){var n;return clearInterval(ko.bindingHandlers.tooltip.interval),clearTimeout(ko.bindingHandlers.tooltip.timeout),ko.bindingHandlers.tooltip.subscribtion.dispose(),$(window).off("touchstart",ko.bindingHandlers.tooltip.touchdispose),e.off("scroll",r),u.off("vclick",r),void 0!==l&&null!==l&&i.off("mouseleave",l),null!=t&&0!==$(t.target).parents("#tooltip").length&&((""===(n=$(t.target).attr("href"))||n.match(/^#.*/))&&t.preventDefault(),t.stopImmediatePropagation(),$(t.target).click()),ko.bindingHandlers.tooltip.remove_tooltip(i,u),!0},t.call(window,"ontouchstart")>=0||i.one("mouseleave",l=function(t){return clearInterval(ko.bindingHandlers.tooltip.interval),ko.bindingHandlers.tooltip.interval=setInterval(function(){if(0===$("#tooltip:hover").length)return r()},1e3)}),clearTimeout(ko.bindingHandlers.tooltip.timeout),ko.bindingHandlers.tooltip.touchdispose=r,ko.bindingHandlers.tooltip.timeout=setTimeout(function(){return u.one("vclick",r),$(window).one("touchstart",ko.bindingHandlers.tooltip.touchdispose)},310),e.one("scroll",r)})}},e=function(t){return this.element=t,this.$element=$(t),this.scrollMargin=Math.floor(this.$element.innerHeight()/10),this.offset=this.$element.offset(),this.innerHeight=this.$element.innerHeight(),this.scrollDeltaMin=5,this.scrollDeltaMax=30},e.prototype.scroll=function(t,e){var n,i,o,l;return l=this.scrollMargin+this.offset.top,void 0,i=0,e<l&&(i=-((l-e)/this.scrollMargin*(this.scrollDeltaMax-this.scrollDeltaMin)+this.scrollDeltaMin)),n=this.offset.top+this.innerHeight-this.scrollMargin,e>n&&(i=(e-n)/this.scrollMargin*(this.scrollDeltaMax-this.scrollDeltaMin)+this.scrollDeltaMin),0!==i&&(o=this.$element.scrollTop(),this.$element.scrollTop(o+i),i=this.$element.scrollTop()-o),i},ko.bindingHandlers.sortable={init:function(t,n,i,o,l){var a,r,s;return s=n(),r=s.items,a=function(e){var n,i,o,l,a;return l=null,i=null,a=null,o=null,n=e.offset(),$(t).find(".sortable").each(function(t,r){var s,u,d;if(r!==e[0])if((s=$(r).offset()).top<n.top){if(null==a||s.top>a.top)return u=[r,s],l=u[0],a=u[1],u}else if(s.top>n.top&&(null==o||s.top<o.top))return d=[r,s],i=d[0],o=d[1],d}),{eleBefore:l,eleAfter:i}},$(t).on("MSPointerDown touchstart mousedown",".handle",function(n){var i,l,u,d,c,p,f,h;return l=$(this).parents(".sortable"),p=function(){var e,n,i,o,r,s,u,d,c;if(u=l.offset(),r=l.outerHeight(),u.bottom=u.top+r,d=a(l),i=d.eleBefore,e=d.eleAfter,(c=$(t).find(".sortable")).each(function(t,e){if(e!==l[0])return $(e).css("margin-bottom",0),$(e).css("margin-top",0)}),c.length>1?null!=i?((o=$(i).offset()).width=$(i).outerHeight(),o.middle=o.top+o.width/2,o.bottom=o.top+o.width,u.top<o.middle?$(i).css("margin-top",r):null!=e?((n=$(e).offset()).width=$(e).outerHeight(),n.middle=n.top+n.width/2,u.bottom>n.middle&&u.top>o.bottom+r/2?$(e).css("margin-bottom",r):$(i).css("margin-bottom",r)):$(i).css("margin-bottom",r)):null!=e&&$(e).css("margin-top",r):l.css("margin-bottom",""),0!==(s=u.top-l.offset().top))return l.data("plugin_pep").doMoveTo(0,s)},c=function(){var t,e,n,i,u,d,c,p,f,h,g;if(p=a(l),i=p.eleBefore,n=p.eleAfter,null!==i||null!==n)if(u=ko.dataFor(l[0]),e=null!=i?ko.dataFor(i):void 0,t=null!=n?ko.dataFor(n):void 0,null!=r){if(f=r.indexOf(u),h=null!=i?(d=r.indexOf(e)+1,f<d&&d--,d):0,f>=0&&h>=0&&f!==h&&(g=ko.utils.unwrapObservable(r),c=g[f],r.valueWillMutate(),g.splice(f,1),g.splice(h,0,c),r.valueHasMutated(),null!=s.sorted))return s.sorted.call(o,u,e,t)}else if(null!=s.sorted)return s.sorted.call(o,u,e,t)},f=null,h=null,u=null,d=null,i=null,l.pep({place:!1,axis:"y",shouldEase:!1,constrainTo:"parent",droppable:s.droppable||".droppable",overlapFunction:function(t,e){var n,i;return n=t[0].getBoundingClientRect(),i=e[0].getBoundingClientRect(),i.bottom-n.bottom>-20&&i.bottom-n.bottom<10},start:function(){var n;return $(t).css("height",$(t).height()),clearTimeout(i),null!=s.isSorting&&s.isSorting(!0),$(t).addClass("noAnimation"),l.css("margin-bottom",-l.innerHeight()),n=$(t).parents(s.scroller||".ui-content.overthrow"),u=new e(n[0]),null,null,d=setInterval(function(){var t;if(0!==(t=u.scroll(f,h)))return l.data("plugin_pep").doMoveTo(0,t)},100)},stop:function(e,n){var a;return clearTimeout(d),a=n.activeDropRegions.length>0,$(n.activeDropRegions).each(function(t,e){if(null!=s.drop)return s.drop.call(o,ko.dataFor(l[0]),e)}),a||c(),l.data("plugin_pep"),$.pep.unbind(l),$(t).find(".sortable").attr("style",""),$(t).css("height",""),null!=s.isSorting&&s.isSorting(!1),i=setTimeout(function(){return $(t).removeClass("noAnimation")},100),l.removeClass("ui-btn-active")},drag:function(t,e){return f=t.pageX,h=t.pageY,p(),!0}}),l.data("plugin_pep").handleStart(n),n.stopImmediatePropagation()})}},ko.bindingHandlers.jqmselectvalue={init:function(t,e,n,i){var o;return void 0!==ko.bindingHandlers.value.init&&ko.bindingHandlers.value.init(t,e,n,i),o=e(),ko.unwrap(o)},update:function(t,e,n,i){var o;return void 0!==ko.bindingHandlers.value.update&&ko.bindingHandlers.value.update(t,e,n,i),$(t).selectmenu("refresh",!0),o=e(),ko.unwrap(o)}},ko.bindingHandlers.dragslide={init:function(t,e,n,i,o){var l,a,r,s,u;u=e(),ko.toJS(u).options,$(t).css({overflow:"hidden"}),$(t).on("selectstart mousedown",function(t){return t.preventDefault()}),s=function(t,e){return $(".drag-message").text(e).css({top:t.position().top,height:t.outerHeight(),"line-height":t.outerHeight()+"px"}).fadeIn(500)},a=null,l=!1,$(t).on("click",function(t){return l?t.preventDefault():a=null}),r=null,$(t).on("vmousedown",".draggable",function(t){if(null!=(r=$(t.target).parents(".draggable"))?r.length:void 0)return a=t}),$(t).on("vmousemove",".draggable",function(t){var e,n,i,o,u,d;return d=$(t.target).parents(".draggable"),null!=a&&(null!=d?d.length:void 0)&&(null!=r?r.length:void 0)&&r[0]===d[0]?(n=Math.abs(t.pageX-a.pageX),i=Math.abs(t.pageY-a.pageY),n>i&&n>5?(t.preventDefault(),t.stopPropagation(),a.preventDefault(),o=ko.dataFor(d[0]),e=null,u=d.position(),d.pep({place:!1,axis:"x",shouldEase:!0,revert:!0,shouldPreventDefault:!1,start:function(t,e){return l=!0},rest:function(t,e){return d.data("plugin_pep"),$.pep.unbind(d),d.attr("style",""),l=!1},drag:function(t,n){var i;return(i=d.position().left-u.left)<-120?"deactivate"!==e&&(s(d,__("deactivate rule")).addClass("deactivate").removeClass("activate"),e="deactivate"):i>120?"activate"!==e&&(s(d,__("activate rule")).addClass("activate").removeClass("deactivate"),e="activate"):null!=e&&($(".drag-message").fadeOut(500),e=null),!0},stop:function(t,n){var i;return $(".drag-message").text("").fadeOut().removeClass("activate").removeClass("deactivate"),null!=e&&(i="activate"===e,pimatic.loading("saveactivate","show",{text:__(e)}),pimatic.client.rest.updateRuleByString({ruleId:o.id,rule:{active:i}}).always(function(){return pimatic.loading("saveactivate","hide")}).done(ajaxShowToast).fail(ajaxAlertFail)),d.removeClass("ui-btn-active")}}),d.data("plugin_pep").revert=function(){return this.shouldUseCSSTranslation()&&this.moveToUsingTransforms(-this.xTranslation(),0),this.moveTo(this.initialPosition.left,0)},d.data("plugin_pep").handleStart(a),a=null):void 0):(r=null,void(a=null))})}}}()}).call(this);