(function(){$(document).on("pagebeforecreate",function(e){var a,t;if(null==pimatic.pages.editDevicepage){a=function(){function e(){this.pageTitle=ko.computed(function(e){return function(){return"add"===e.action()?__("Add New Page"):__("Edit Page")}}(this)),pimatic.autoFillId(this.pageName,this.pageId,this.action)}return e.prototype.action=ko.observable("add"),e.prototype.pageName=ko.observable(""),e.prototype.pageId=ko.observable(""),e.prototype.resetFields=function(){return this.pageName(""),this.pageId("")},e.prototype.onSubmit=function(){var e;{if(pimatic.isValidId(this.pageId()))return e={pageId:this.pageId(),page:{name:this.pageName()}},function(){switch(this.action()){case"add":return pimatic.client.rest.addPage(e);case"update":return pimatic.client.rest.updatePage(e);default:throw new Error("Illegal devicepage action: "+action())}}.call(this).done(function(e){return e.success?$.mobile.changePage("#devicepages-page",{transition:"slide",reverse:!0}):alert(e.error)}).fail(ajaxAlertFail),!1;alert(__(pimatic.invalidIdMessage))}},e.prototype.onRemove=function(){if(confirm(__("Do you really want to delete the %s page?",this.pageName())))return pimatic.client.rest.removePage({pageId:this.pageId()}).done(function(e){return e.success?$.mobile.changePage("#devicepages-page",{transition:"slide",reverse:!0}):alert(e.error)}).fail(ajaxAlertFail),!1},e}();try{pimatic.pages.editDevicepage=new a}catch(e){t=e,TraceKit.report(t)}}}),$(document).on("pagecreate","#edit-devicepage-page",function(e){var a;try{return ko.applyBindings(pimatic.pages.editDevicepage,$("#edit-devicepage-page")[0])}catch(e){return a=e,TraceKit.report(a)}}),$(document).on("pagebeforeshow","#edit-devicepage-page",function(e){var a,t,i;a=pimatic.pages.editDevicepage,i=jQuery.mobile.pageParams,jQuery.mobile.pageParams={},"update"===(null!=i?i.action:void 0)?(t=i.page,a.action("update"),a.pageId(t.id),a.pageName(t.name())):(a.resetFields(),a.action("add"))})}).call(this);