(function(){var e,t=function(e,t){return function(){return e.apply(t,arguments)}};e=pimatic.tryCatch,$(document).on("pagebeforecreate","#devicepages-page",e(function(i){var a;return a=function(){function i(){this.onEditDevicepageClicked=t(this.onEditDevicepageClicked,this),this.onAddDevicepageClicked=t(this.onAddDevicepageClicked,this),this.onDevicepagesSorted=t(this.onDevicepagesSorted,this),this.devicepages=pimatic.devicepages,this.devicepagesListViewRefresh=ko.computed(e(function(e){return function(){return e.devicepages(),e.isSortingDevicepages(),e.enabledEditing(),pimatic.try(function(){return $("#devicepages").listview("refresh").addClass("dark-background")})}}(this))).extend({rateLimit:{timeout:1,method:"notifyWhenChangesStop"}}),this.lockButton=ko.computed(e(function(e){return function(){var t;return t=e.enabledEditing(),{icon:t?"check":"gear"}}}(this)))}return i.prototype.enabledEditing=ko.observable(!0),i.prototype.isSortingDevicepages=ko.observable(!1),i.prototype.afterRenderDevicepage=function(e,t){var i;return i=$("#sortable-handle-template").text(),$(e).find("a").before($(i))},i.prototype.toggleEditing=function(){return this.enabledEditing(!this.enabledEditing())},i.prototype.onDevicepagesSorted=function(e,t,i){var a,n,o,r,c;for(r=[],null==t&&r.push(e.id),n=0,o=(c=this.devicepages()).length;n<o;n++)(a=c[n])!==e&&(r.push(a.id),null!=t&&a===t&&r.push(e.id));return pimatic.client.rest.updatePageOrder({pageOrder:r}).done(ajaxShowToast).fail(ajaxAlertFail)},i.prototype.onDropDevicepageOnTrash=function(e){if(confirm(__("Do you really want to delete the %s devicepage?",e.name())))return function(){return pimatic.loading("deletedevicepage","show",{text:__("Saving")}),pimatic.client.rest.removePage({pageId:e.id}).always(function(){return pimatic.loading("deletedevicepage","hide")}).done(ajaxShowToast).fail(ajaxAlertFail)}()},i.prototype.onAddDevicepageClicked=function(){return jQuery.mobile.pageParams={action:"add"},!0},i.prototype.onEditDevicepageClicked=function(e){return jQuery.mobile.pageParams={action:"update",page:e},!0},i}(),pimatic.pages.devicepages=new a})),$(document).on("pagecreate","#devicepages-page",e(function(e){var t,i,a;t=pimatic.pages.devicepages;try{ko.applyBindings(t,$("#devicepages-page")[0])}catch(e){i=e,TraceKit.report(i),null!=(a=pimatic.storage)&&a.removeAll(),window.location.reload()}$("#devicepages .handle").disableSelection()})),$(document).on("pagebeforeshow","#devicepages-page",e(function(e){return pimatic.try(function(){return $("#devicepages").listview("refresh").addClass("dark-background")})}))}).call(this);