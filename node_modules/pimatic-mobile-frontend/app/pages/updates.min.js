(function(){$(document).on("pagecreate","#updates-page",function(t){var e,a,i;e=function(){function t(){this.updateProcessStatus=pimatic.updateProcessStatus,this.updateProcessMessages=pimatic.updateProcessMessages,this.hasUpdates=ko.computed(function(t){return function(){var e;return(null!=(e=t.pimaticUpdateInfo())?e.outdated:void 0)||t.outdatedPlugins().length>0}}(this)),this.pimaticUpdateInfoText=ko.computed(function(t){return function(){var e;return null==(e=t.pimaticUpdateInfo())?"":e.outdated?__("Found update for %s: current version is %s, latest version is: %s","pimatic",e.outdated.current,e.outdated.latest):__("pimatic is up to date.")}}(this)),this.pluginUpdateInfoText=ko.computed(function(t){return function(){var e,a;return null==(e=t.outdatedPlugins())?[]:0===e.length?[__("All plugins are up to date.")]:function(){var t,i,n;for(n=[],t=0,i=e.length;t<i;t++)a=e[t],n.push(__("Found update for %s: current version is %s, latest version is: %s",a.plugin,a.current,a.latest));return n}()}}(this))}return t.prototype.pimaticUpdateInfo=ko.observable(null),t.prototype.outdatedPlugins=ko.observableArray(null),t.prototype.installUpdatesClicked=function(){var t,e;return t=this.pimaticUpdateInfo().outdated?["pimatic"]:[],t=t.concat(function(){var t,a,i,n;for(n=[],t=0,a=(i=this.outdatedPlugins()).length;t<a;t++)e=i[t],n.push(e.plugin);return n}.call(this)),pimatic.client.rest.installUpdatesAsync({modules:t}).fail(function(t,e,a){if("timeout"!==e)return ajaxAlertFail(t,e,a)})},t.prototype.restart=function(){return pimatic.client.rest.restart({}).fail(ajaxAlertFail)},t.prototype.searchForPimaticUpdate=function(){return pimatic.client.rest.isPimaticOutdated().done(function(t){return function(e){t.pimaticUpdateInfo(e)}}(this)).fail(ajaxAlertFail)},t.prototype.searchForOutdatedPlugins=function(){return pimatic.client.rest.getOutdatedPlugins().done(function(t){return function(e){t.outdatedPlugins(e.outdatedPlugins)}}(this)).fail(ajaxAlertFail)},t}();try{pimatic.pages.updates=i=new e,ko.applyBindings(i,$("#updates-page")[0])}catch(t){a=t,TraceKit.report(a)}}),$(document).on("pageshow","#updates-page",function(t){var e,a;try{return(a=pimatic.pages.updates).searchForPimaticUpdate(),a.searchForOutdatedPlugins()}catch(t){return e=t,TraceKit.report(e)}})}).call(this);